<h1>20250917</h1>
<h3>탬플릿 메서드</h3><br>

Keyword: `템플릿 메서드`·`템플릿 메서드 패턴`·`후크`·`추상화`
- 템플릿 메서드: 1) 알고리즘의 전체적인 흐름을 정의 2) `final` 로 선언하여 오버라이드 방지 (단, 파이썬에는 final이 없어요)
> 상위 클래스에서 알고리즘의 전체적인 흐름을 정의하는 메서드.<br>
> 세부 단계는 하위 클래스에 위임
> `final` 로 선언하여 오버라이드 방지

- 템플릿 메서드 패턴
> 알고리즘의 전체 골격Framework을 상위 클래스에서 정의하고, 세부 단계는 하위 클래스에서 구현하도록 유도하는 디자인 패턴.<br>
> 이렇게 사용하면 공통된 알고리즘 구조를 여러 클래스에서 공유할 때 중복을 줄이고 유지보수를 쉽게 할 수 있다.<br>
> 전체 알고리즘 구조는 고정하고, 일부 단계만 서브클래스에서 구현한다.<br>
> 장점: 일관성을 보장함(유지보수 용이, 재사용성 ↑): 알고리즘을 수정할 때 상위 클래스의 탬플릿만 수정하면 됨.<br>
> 하단 예시에서, `CaffeineBeverage` 가 추상 클래스로써 알고리즘 골격 제공 → `Coffee`·`Tea` 가 세부 단계를 구현

- 후크
> 선택적으로 오버라이딩 가능한 메서드 및 그렇게 남겨 둔 확장 포인트. (패턴 내에서 선택적 확장을 위한 메서드)<br>
> 기본적으로 비어있음 / 비어있는 메서드<br>
> `Return True/False` → 알고리즘 흐름 제어 가능.<br>
> 하단에선 `customer_request_condiment()` 로 나타냅니다.

- 추상화? (추상화 ↔ 구체화)
> 상위 클래스는 추상적인 틀을 주고, 구체적인 것은 하위 클래스에서 작업.<br>
> 추상 클래스(Template Class): 알고리즘의 흐름(메서드 호출 순서)을 정의하는 템플릿 메서드를 포함합니다.<br>
> 추상 메서드: 하위 클래스에서 반드시 구현해야 하는 메서드<br>
> 구체 메서드: 모든 하위 클래스에서 공통으로 사용되는 공통 로직 메드<br>
> 하단에서<br>
> - 추상 클래스 = `CaffeineBeverage(ABC)`
> - 추상 메서드 = `brew()` `add_condiments()` 얘네는 구현 강제
> - 구체 메서드 = `boil_water()` `pourincup()` 모두가 공통으로 사용!
> - 구체 클래스 = `Coffee` `Tea` 실제 동작을 구현

예시 코드
```python
from abc import ABC, abstractmethod # 추상화 위해서 import, ABC는 추상 클래스를 만들 때 사용합니다.

class CaffeineBeverage(ABC):
# 추상 클래스입니다. 알고리즘의 틀을 정의하고, 세부 단계는 하위 클래스에 위임해요.
    def prepare_recipe(self):
    # 템플릿 메서드입니다.
    # 알고리즘의 전체 흐름을 정의해요. 공통 단계(물 끓이기, 컵에 따르기)는 구체 메서드로 직접 구현되어 있어요.
    # 변하는 단계(추출, 첨가물 추가)는 추상 메서드/후크로 남겨뒀습니다.
        self.boil_water()    # 구체 메서드(모든 하위 클래스에서 동일)
        self.brew()    # 추상 메서드(하위 클래스에서 구현 예정)
        self.pourincup()    # 구체 메서드
        if self.customer_request_condiments(): # 후크 메서드. 선택적 확장 포인트
            self.add_condiments()    # 추상 메서드

    # 추상 메서드. 하위 클래스에서 반드시 구현해야 함 → 구체적 행동은 서브클래스에서. 
    @abstractmethod    
    def brew(self):
        raise NotImplementedError
    # 만들 순 있는데 일단 이렇게 생략함
    
    @abstractmethod
    def add_condiments(self):
        raise NotImplementedError
    # 동일하게 생략

    # 여기서부터 구체 메서드. 모든 하위 클래스에서 동일하게 사용되는 로직!
    def boil_water(self):
        print("boiling water")

    def pourincup(self):
        print("pouring water in cup")

    # 후크. 선택적으로 오버라이딩 가능. (재정의도 가능해요)
    # 기본 동작: 사용자 입력에 따라 condiments 추가 여부를 true/false로 제어.
    # 하위 클래스가 이 메서드를 재정의하면 → 알고리즘 흐름 변화 가능
    def customer_request_condiments():
        answer = input("anything to add: Y/N").lower()
        if answer == "y":
            return True
        return False

# 구체 클래스 (↔ 추상 클래스) (Concrete Class): 상위 클래스의 추상 메서드를 실제로 구현!
class Coffee(CaffeineBeverage):
    def brew(self): # 얘 위에서 구현 안 되어 있던거 기억하죠?
        print("coffee is extracting")

class Tea(CaffeineBeverage):
    def brew(self): # 마찬가지로. 하지만 Tea니까 조금 다르게 적용할 거에요.
        print("steeping the tea bag")

# 실행부
tea = Tea()
tea.prepare_recipe()   # 템플릿 메서드 호출 → Tea의 세부 구현 결합된 알고리즘을 실행해요.

coffee = Coffee()
coffee.prepare_recipe()    # 마찬가지, 템플릿 메서드 호출 → Coffee의 세부 구현 결합된 알고리즘 실행.
```

- 다른 패턴과의 비교
<html>
<head></head>
    <body>
        <table>
            <tr>
                <th>패턴</th>
                <th>목적</th>
                <th>구조</th>
                <th>사용시점</th>
            </tr>
            <tr>
                <td><strong>탬플릿 메소드</strong></td>
                <td>알고리즘 골격 정의할 때</td>
                <td>상속 기반</td>
                <td>알고리즘의 단계는 고정<br>구현만 다를 때</td>
            </tr>
            <tr>
                <td><strong>전략 메소드</strong></td>
                <td>알고리즘 교체 가능하게끔</td>
                <td>컴포지션 기반</td>
                <td>러타임에 알고리즘을 바꿔야 할 때</td>
            </tr>
            <tr>
                <td><strong>팩토리 메소드</strong></td>
                <td>객체 생성 방법 정의할 때</td>
                <td>상속 기반</td>
                <td>생성할 객체 타입이<br>하위 클래스에 따라 달라질 때</td>
            </tr>
        </table>
    </body>
</html>

다이어그램 작성: (이미지 참조)
<img scr = "0917_pic/0917_pic01.jpg"><br>
<img scr = "0917_pic/0917_pic02.png"><br>
<img scr = "0917_pic/0917_pic03.png"><br>
<details>
<summary>나의 의견</summary>
클래스에 대해서 잘 알아보라고 했던 말씀이 이거였나보네요...😭😭<br>
이해한 부분: 추상화 클래스, 추상 메서드는 반드시 밑에서 구체로 구현할 것.<br>
할리우드 원칙은 잘...?<br>
팩토리는 어떻게 해야하죠 애드온 달고 시즈업 하면 되나<br>
약간 스타크래프트 머릿속으로 어떻게 굴릴 지 생각하는 것처럼 해야할지도 1배1팩1스타포트 ㅁㄴㅇㄹ
</details>
